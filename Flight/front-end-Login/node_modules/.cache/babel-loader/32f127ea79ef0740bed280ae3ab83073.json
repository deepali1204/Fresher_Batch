{"ast":null,"code":"var _jsxFileName = \"C:\\\\Flight\\\\front-end-Login\\\\src\\\\components\\\\book.component.js\";\nimport React, { Component } from \"react\";\nimport Form from \"react-validation/build/form\";\nimport Input from \"react-validation/build/input\";\nimport CheckButton from \"react-validation/build/button\";\nimport FlightsService from \"../services/flight.service\";\nimport BookService from \"../services/book.service\";\nimport AuthService from \"../services/auth.service\";\nimport \"../book.css\";\n/** \r\nconst vFrom = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n*/\n\nexport default class Book extends Component {\n  constructor(props) {\n    super(props);\n    this.getFlight = this.getFlight.bind(this);\n    this.bookFlight = this.bookFlight.bind(this);\n    this.onchangeQuantity = this.onchangeQuantity.bind(this);\n    this.state = {\n      currentUser: AuthService.getCurrentUser(),\n      currentFlight: {\n        id: null,\n        flight_name: \"\",\n        from: \"\",\n        to: \"\",\n        date: \"\",\n        departuretime: \"\",\n        arrivaltime: \"\",\n        fare: \"\"\n      },\n      quantity: \"1\"\n    };\n  }\n\n  onchangeQuantity(e) {\n    this.setState({\n      quantity: e.target.value\n    });\n  }\n\n  componentDidMount() {\n    this.getFlight(this.props.match.params.id);\n    console.log(this.state.currentUser);\n    console.log(this.getFlight);\n  }\n\n  bookFlight(e) {\n    e.preventDefault();\n    console.log(\"inside bookflight\");\n    var currentFlight = {\n      flight_name: this.state.currentFlight.flight_name,\n      from: this.state.currentFlight.from,\n      to: this.state.currentFlight.to,\n      date: this.state.currentFlight.date,\n      departuretime: this.state.currentFlight.departuretime,\n      arrivaltime: this.state.currentFlight.arrivaltime,\n      fare: this.state.currentFlight.fare\n    };\n    console.log(currentFlight);\n    BookService.BookFlight(this.state.currentUser, currentFlight, this.state.quantity).then(response => {\n      console.log(\"inside booking\");\n\n      if (response) {\n        console.log(response);\n        alert(\"Your Ticket is Booked! Your bookingId is ${response.booking.booking_id}Proceed for Payment\");\n      } else {\n        alert(\"Booking Failed\");\n      }\n    }).catch(e => {\n      console.log(\"inside error\");\n      console.log(e);\n    });\n  }\n\n  getFlight(id) {\n    FlightsService.get(id).then(response => {\n      this.setState({\n        currentFlight: response.data\n      });\n      console.log(response.data);\n    }).catch(e => {\n      console.log(e);\n    });\n  }\n\n  render() {\n    // const { flight } = this.state;\n    const {\n      currentFlight,\n      currentUser,\n      bookingdata\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }, currentFlight && currentUser ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"editform\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      class: \"form-style\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, \" Booking Details\"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }, \"From\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"linecontrol\",\n      value: currentFlight.from,\n      onChange: this.onChangeFrom,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, \"To\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"linecontrol\",\n      value: currentFlight.to,\n      onChange: this.onChangeTo,\n      validations: [required],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }\n    }, \"Flight Name\")), /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        marginLeft: \"10px\",\n        float: \"left\"\n      },\n      type: \"text\",\n      className: \"control\",\n      value: currentFlight.flight_name,\n      onChange: this.onChangeFlightName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    }, \"Date\")), /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        marginLeft: \"10px\",\n        float: \"left\"\n      },\n      type: \"text\",\n      className: \"control\",\n      id: \"description\",\n      value: currentFlight.date,\n      onChange: this.onChangeDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }, \"Departure Time\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"linecontrol\",\n      id: \"description\",\n      value: currentFlight.departuretime,\n      onChange: this.onChangeDepartureTime,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }\n    }, \"Arrival Time\")), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"linecontrol\",\n      id: \"description\",\n      value: currentFlight.arrivaltime,\n      onChange: this.onChangeArrivalTime,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 21\n      }\n    }, \"Fare\")), /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        marginLeft: \"10px\",\n        float: \"left\"\n      },\n      type: \"text\",\n      className: \"control\",\n      id: \"description\",\n      value: currentFlight.fare,\n      onChange: this.onChangeFare,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"two\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 19\n      }\n    }, \"Personal Details\"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }\n    }, \"First Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"control\",\n      value: currentUser.username,\n      onChange: this.onChangeUsername,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 21\n      }\n    }, \"Last Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"linecontrol\",\n      value: currentUser.lastname,\n      onChange: this.onChangeTo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 21\n      }\n    }, \"Gender\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"linecontrol\",\n      value: currentUser.gender,\n      onChange: this.onChangeDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      class: \"text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 21\n      }\n    }, \"Number of Passengers\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"control\",\n      value: this.state.quantity,\n      onChange: this.onchangeQuantity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-warning text-white\",\n      onClick: e => {\n        this.bookFlight(e);\n      },\n      id: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 21\n      }\n    }, \"Continue\")))))) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 15\n      }\n    }, \"Please Login First to continue..\"), /*#__PURE__*/React.createElement(\"a\", {\n      id: \"loginlink\",\n      href: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 15\n      }\n    }, \"Sign In\")));\n  }\n\n}","map":{"version":3,"sources":["C:/Flight/front-end-Login/src/components/book.component.js"],"names":["React","Component","Form","Input","CheckButton","FlightsService","BookService","AuthService","Book","constructor","props","getFlight","bind","bookFlight","onchangeQuantity","state","currentUser","getCurrentUser","currentFlight","id","flight_name","from","to","date","departuretime","arrivaltime","fare","quantity","e","setState","target","value","componentDidMount","match","params","console","log","preventDefault","BookFlight","then","response","alert","catch","get","data","render","bookingdata","onChangeFrom","onChangeTo","required","marginLeft","float","onChangeFlightName","onChangeDate","onChangeDepartureTime","onChangeArrivalTime","onChangeFare","username","onChangeUsername","lastname","gender"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,6BAAjB;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AAEA,OAAO,aAAP;AAEA;;;;;;;;;;;;AAYA,eAAe,MAAMC,IAAN,SAAmBP,SAAnB,CAA6B;AAC1CQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKE,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBF,IAAtB,CAA2B,IAA3B,CAAxB;AAEA,SAAKG,KAAL,GAAa;AACXC,MAAAA,WAAW,EAAET,WAAW,CAACU,cAAZ,EADF;AAEXC,MAAAA,aAAa,EAAE;AACbC,QAAAA,EAAE,EAAE,IADS;AAEbC,QAAAA,WAAW,EAAE,EAFA;AAGbC,QAAAA,IAAI,EAAE,EAHO;AAIbC,QAAAA,EAAE,EAAE,EAJS;AAKbC,QAAAA,IAAI,EAAE,EALO;AAMbC,QAAAA,aAAa,EAAE,EANF;AAObC,QAAAA,WAAW,EAAE,EAPA;AAQbC,QAAAA,IAAI,EAAE;AARO,OAFJ;AAYXC,MAAAA,QAAQ,EAAE;AAZC,KAAb;AAcD;;AAEDb,EAAAA,gBAAgB,CAACc,CAAD,EAAI;AAClB,SAAKC,QAAL,CAAc;AACZF,MAAAA,QAAQ,EAAEC,CAAC,CAACE,MAAF,CAASC;AADP,KAAd;AAGD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKrB,SAAL,CAAe,KAAKD,KAAL,CAAWuB,KAAX,CAAiBC,MAAjB,CAAwBf,EAAvC;AACAgB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKrB,KAAL,CAAWC,WAAvB;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKzB,SAAjB;AACD;;AAEDE,EAAAA,UAAU,CAACe,CAAD,EAAI;AACZA,IAAAA,CAAC,CAACS,cAAF;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,QAAIlB,aAAa,GAAG;AAClBE,MAAAA,WAAW,EAAE,KAAKL,KAAL,CAAWG,aAAX,CAAyBE,WADpB;AAElBC,MAAAA,IAAI,EAAE,KAAKN,KAAL,CAAWG,aAAX,CAAyBG,IAFb;AAGlBC,MAAAA,EAAE,EAAE,KAAKP,KAAL,CAAWG,aAAX,CAAyBI,EAHX;AAIlBC,MAAAA,IAAI,EAAE,KAAKR,KAAL,CAAWG,aAAX,CAAyBK,IAJb;AAKlBC,MAAAA,aAAa,EAAE,KAAKT,KAAL,CAAWG,aAAX,CAAyBM,aALtB;AAMlBC,MAAAA,WAAW,EAAE,KAAKV,KAAL,CAAWG,aAAX,CAAyBO,WANpB;AAOlBC,MAAAA,IAAI,EAAE,KAAKX,KAAL,CAAWG,aAAX,CAAyBQ;AAPb,KAApB;AASAS,IAAAA,OAAO,CAACC,GAAR,CAAYlB,aAAZ;AACAZ,IAAAA,WAAW,CAACgC,UAAZ,CACE,KAAKvB,KAAL,CAAWC,WADb,EAEEE,aAFF,EAGE,KAAKH,KAAL,CAAWY,QAHb,EAKGY,IALH,CAKSC,QAAD,IAAc;AAClBL,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;;AACA,UAAGI,QAAH,EAAY;AACZL,QAAAA,OAAO,CAACC,GAAR,CAAYI,QAAZ;AACAC,QAAAA,KAAK,CAAC,4FAAD,CAAL;AACD,OAHC,MAIE;AACFA,QAAAA,KAAK,CAAC,gBAAD,CAAL;AACD;AACA,KAdH,EAeGC,KAfH,CAeUd,CAAD,IAAO;AACZO,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYR,CAAZ;AACD,KAlBH;AAmBD;;AAEDjB,EAAAA,SAAS,CAACQ,EAAD,EAAK;AACZd,IAAAA,cAAc,CAACsC,GAAf,CAAmBxB,EAAnB,EACGoB,IADH,CACSC,QAAD,IAAc;AAClB,WAAKX,QAAL,CAAc;AACZX,QAAAA,aAAa,EAAEsB,QAAQ,CAACI;AADZ,OAAd;AAGAT,MAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACI,IAArB;AACD,KANH,EAOGF,KAPH,CAOUd,CAAD,IAAO;AACZO,MAAAA,OAAO,CAACC,GAAR,CAAYR,CAAZ;AACD,KATH;AAUD;;AAEDiB,EAAAA,MAAM,GAAG;AACP;AACA,UAAM;AAAE3B,MAAAA,aAAF;AAAiBF,MAAAA,WAAjB;AAA8B8B,MAAAA;AAA9B,QAA8C,KAAK/B,KAAzD;AAEA,wBACE;AAAK,MAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGKG,aAAa,IAAIF,WAAjB,gBAEC;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE;AAAM,MAAA,KAAK,EAAC,YAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAI,MAAA,KAAK,EAAC,YAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADA,eAGG;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGD;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CADF,eAIE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,aAFZ;AAGE,MAAA,KAAK,EAAEE,aAAa,CAACG,IAHvB;AAIE,MAAA,QAAQ,EAAE,KAAK0B,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CAHC,eAgBA;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACC;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADD,eAIC;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,aAFZ;AAGE,MAAA,KAAK,EAAE7B,aAAa,CAACI,EAHvB;AAIE,MAAA,QAAQ,EAAE,KAAK0B,UAJjB;AAKE,MAAA,WAAW,EAAE,CAACC,QAAD,CALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJD,CAhBA,eA6BD;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,CADF,eAIE;AACE,MAAA,KAAK,EAAE;AAAEC,QAAAA,UAAU,EAAE,MAAd;AAAsBC,QAAAA,KAAK,EAAE;AAA7B,OADT;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,SAAS,EAAC,SAHZ;AAIE,MAAA,KAAK,EAAEjC,aAAa,CAACE,WAJvB;AAKE,MAAA,QAAQ,EAAE,KAAKgC,kBALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CA7BC,eA2CD;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CADF,eAIE;AACE,MAAA,KAAK,EAAE;AAAEF,QAAAA,UAAU,EAAE,MAAd;AAAsBC,QAAAA,KAAK,EAAE;AAA7B,OADT;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,SAAS,EAAC,SAHZ;AAIE,MAAA,EAAE,EAAC,aAJL;AAKE,MAAA,KAAK,EAAEjC,aAAa,CAACK,IALvB;AAME,MAAA,QAAQ,EAAE,KAAK8B,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CA3CC,eA0DD;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CADF,eAIE;AACC,MAAA,IAAI,EAAC,MADN;AAEE,MAAA,SAAS,EAAC,aAFZ;AAGE,MAAA,EAAE,EAAC,aAHL;AAIE,MAAA,KAAK,EAAEnC,aAAa,CAACM,aAJvB;AAKE,MAAA,QAAQ,EAAE,KAAK8B,qBALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CA1DC,eAwED;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CADF,eAIE;AACC,MAAA,IAAI,EAAC,MADN;AAEE,MAAA,SAAS,EAAC,aAFZ;AAGE,MAAA,EAAE,EAAC,aAHL;AAIE,MAAA,KAAK,EAAEpC,aAAa,CAACO,WAJvB;AAKE,MAAA,QAAQ,EAAE,KAAK8B,mBALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CAxEC,eAsFD;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CADF,eAIE;AACE,MAAA,KAAK,EAAE;AAAEL,QAAAA,UAAU,EAAE,MAAd;AAAsBC,QAAAA,KAAK,EAAE;AAA7B,OADT;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,SAAS,EAAC,SAHZ;AAIE,MAAA,EAAE,EAAC,aAJL;AAKE,MAAA,KAAK,EAAEjC,aAAa,CAACQ,IALvB;AAME,MAAA,QAAQ,EAAE,KAAK8B,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CAtFC,eAqGD;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,KAAK,EAAC,YAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAGE;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,SAFZ;AAGE,MAAA,KAAK,EAAExC,WAAW,CAACyC,QAHrB;AAIE,MAAA,QAAQ,EAAE,KAAKC,gBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAHF,eAcE;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,aAFZ;AAGE,MAAA,KAAK,EAAE1C,WAAW,CAAC2C,QAHrB;AAIE,MAAA,QAAQ,EAAE,KAAKX,UAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAdF,eAyBE;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,aAFZ;AAGE,MAAA,KAAK,EAAEhC,WAAW,CAAC4C,MAHrB;AAIE,MAAA,QAAQ,EAAE,KAAKP,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAzBF,eAoCE;AAAK,MAAA,KAAK,EAAC,YAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,KAAK,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAEE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,SAAS,EAAC,SAFZ;AAGE,MAAA,KAAK,EAAE,KAAKtC,KAAL,CAAWY,QAHpB;AAIE,MAAA,QAAQ,EAAE,KAAKb,gBAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CApCF,eA8CE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsB,MAAA,KAAK,EAAC,4BAA5B;AACE,MAAA,OAAO,EAAGc,CAAD,IAAO;AACd,aAAKf,UAAL,CAAgBe,CAAhB;AACD,OAHH;AAIE,MAAA,EAAE,EAAC,QAJL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CA9CF,CArGC,CAHH,CAFF,CAFD,gBA0KC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAFF,eAGE;AAAG,MAAA,EAAE,EAAC,WAAN;AAAkB,MAAA,IAAI,EAAC,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHF,CA7KN,CADF;AAyLD;;AA/QyC","sourcesContent":["import React, { Component } from \"react\";\r\nimport Form from \"react-validation/build/form\";\r\nimport Input from \"react-validation/build/input\";\r\nimport CheckButton from \"react-validation/build/button\";\r\nimport FlightsService from \"../services/flight.service\";\r\nimport BookService from \"../services/book.service\";\r\nimport AuthService from \"../services/auth.service\";\r\n\r\nimport \"../book.css\";\r\n\r\n/** \r\nconst vFrom = value => {\r\n  if (!value) {\r\n    return (\r\n      <div className=\"alert alert-danger\" role=\"alert\">\r\n        This field is required!\r\n      </div>\r\n    );\r\n  }\r\n};\r\n*/\r\n\r\nexport default class Book extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.getFlight = this.getFlight.bind(this);\r\n    this.bookFlight = this.bookFlight.bind(this);\r\n    this.onchangeQuantity = this.onchangeQuantity.bind(this);\r\n\r\n    this.state = {\r\n      currentUser: AuthService.getCurrentUser(),\r\n      currentFlight: {\r\n        id: null,\r\n        flight_name: \"\",\r\n        from: \"\",\r\n        to: \"\",\r\n        date: \"\",\r\n        departuretime: \"\",\r\n        arrivaltime: \"\",\r\n        fare: \"\",\r\n      },\r\n      quantity: \"1\",\r\n    };\r\n  }\r\n\r\n  onchangeQuantity(e) {\r\n    this.setState({\r\n      quantity: e.target.value,\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getFlight(this.props.match.params.id);\r\n    console.log(this.state.currentUser);\r\n    console.log(this.getFlight);\r\n  }\r\n\r\n  bookFlight(e) {\r\n    e.preventDefault();\r\n    console.log(\"inside bookflight\");\r\n    var currentFlight = {\r\n      flight_name: this.state.currentFlight.flight_name,\r\n      from: this.state.currentFlight.from,\r\n      to: this.state.currentFlight.to,\r\n      date: this.state.currentFlight.date,\r\n      departuretime: this.state.currentFlight.departuretime,\r\n      arrivaltime: this.state.currentFlight.arrivaltime,\r\n      fare: this.state.currentFlight.fare,\r\n    };\r\n    console.log(currentFlight);\r\n    BookService.BookFlight(\r\n      this.state.currentUser,\r\n      currentFlight,\r\n      this.state.quantity\r\n    )\r\n      .then((response) => {\r\n        console.log(\"inside booking\");\r\n        if(response){\r\n        console.log(response);\r\n        alert(\"Your Ticket is Booked! Your bookingId is ${response.booking.booking_id}Proceed for Payment\");\r\n      }\r\n      else{\r\n        alert(\"Booking Failed\")\r\n      }\r\n      })\r\n      .catch((e) => {\r\n        console.log(\"inside error\");\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  getFlight(id) {\r\n    FlightsService.get(id)\r\n      .then((response) => {\r\n        this.setState({\r\n          currentFlight: response.data,\r\n        });\r\n        console.log(response.data);\r\n      })\r\n      .catch((e) => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    // const { flight } = this.state;\r\n    const { currentFlight, currentUser, bookingdata } = this.state;\r\n\r\n    return (\r\n      <div class=\"container\">\r\n        \r\n       \r\n          {currentFlight && currentUser ? (\r\n\r\n            <div className=\"editform\">\r\n             \r\n              <form class=\"form-style\">\r\n              <h3 class=\"text-white\"> Booking Details</h3>\r\n               \r\n                 <div class=\"input\">\r\n\r\n\r\n                <div className=\"group\">\r\n                  <label class=\"text-white\">\r\n                    <strong>From</strong>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"linecontrol\"\r\n                    value={currentFlight.from}\r\n                    onChange={this.onChangeFrom}\r\n                   \r\n                  />\r\n                </div>\r\n\r\n                 <div className=\"group\">\r\n                  <label class=\"text-white\">\r\n                    <strong>To</strong>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"linecontrol\"\r\n                    value={currentFlight.to}\r\n                    onChange={this.onChangeTo}\r\n                    validations={[required]}\r\n                  />\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label class=\"text-white\">\r\n                    <strong>Flight Name</strong>\r\n                  </label>\r\n                  <input\r\n                    style={{ marginLeft: \"10px\", float: \"left\" }}\r\n                    type=\"text\"\r\n                    className=\"control\"\r\n                    value={currentFlight.flight_name}\r\n                    onChange={this.onChangeFlightName}\r\n                    \r\n                  />\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label class=\"text-white\">\r\n                    <strong>Date</strong>\r\n                  </label>\r\n                  <input\r\n                    style={{ marginLeft: \"10px\", float: \"left\" }}\r\n                    type=\"text\"\r\n                    className=\"control\"\r\n                    id=\"description\"\r\n                    value={currentFlight.date}\r\n                    onChange={this.onChangeDate}\r\n                   \r\n                  />\r\n                </div>\r\n\r\n                <div class=\"group\">\r\n                  <label class=\"text-white\">\r\n                    <strong>Departure Time</strong>\r\n                  </label>\r\n                  <input\r\n                   type=\"text\"\r\n                    className=\"linecontrol\"\r\n                    id=\"description\"\r\n                    value={currentFlight.departuretime}\r\n                    onChange={this.onChangeDepartureTime}\r\n                   \r\n                  />\r\n                </div>\r\n\r\n                <div class=\"group\">\r\n                  <label class=\"text-white\">\r\n                    <strong>Arrival Time</strong>\r\n                  </label>\r\n                  <input\r\n                   type=\"text\"\r\n                    className=\"linecontrol\"\r\n                    id=\"description\"\r\n                    value={currentFlight.arrivaltime}\r\n                    onChange={this.onChangeArrivalTime}\r\n                   \r\n                  />\r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <label class=\"text-white\">\r\n                    <strong>Fare</strong>\r\n                  </label>\r\n                  <input\r\n                    style={{ marginLeft: \"10px\", float: \"left\" }}\r\n                    type=\"text\"\r\n                    className=\"control\"\r\n                    id=\"description\"\r\n                    value={currentFlight.fare}\r\n                    onChange={this.onChangeFare}\r\n                    \r\n                  />\r\n                </div>\r\n                 \r\n                <div className=\"two\">\r\n                  <h3 class=\"text-white\">Personal Details</h3>\r\n\r\n                  <div class=\"form-group\">\r\n                    <label class=\"text-white\">First Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"control\"\r\n                      value={currentUser.username}\r\n                      onChange={this.onChangeUsername}\r\n                      \r\n                    />\r\n                  </div>\r\n\r\n                  <div class=\"group\">\r\n                    <label class=\"text-white\">Last Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"linecontrol\"\r\n                      value={currentUser.lastname}\r\n                      onChange={this.onChangeTo}\r\n                     \r\n                    />\r\n                  </div>\r\n\r\n                  <div class=\"group\">\r\n                    <label class=\"text-white\">Gender</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"linecontrol\"\r\n                      value={currentUser.gender}\r\n                      onChange={this.onChangeDate}\r\n                      \r\n                    />\r\n                  </div>\r\n\r\n                  <div class=\"form-group\">\r\n                    <label class=\"text-white\">Number of Passengers</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"control\"\r\n                      value={this.state.quantity}\r\n                      onChange={this.onchangeQuantity}\r\n                      \r\n                    />\r\n                  </div>\r\n                  <div className=\"col text-center\">\r\n                    <button type=\"submit\" class=\"btn btn-warning text-white\"\r\n                      onClick={(e) => {\r\n                        this.bookFlight(e);\r\n                      }}\r\n                      id=\"button\"\r\n                     \r\n                    >\r\n                      Continue\r\n                    </button>\r\n                  </div>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <br />\r\n              <p>Please Login First to continue..</p>\r\n              <a id=\"loginlink\" href=\"/login\">\r\n                Sign In\r\n              </a>\r\n            </div>\r\n          )}\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}